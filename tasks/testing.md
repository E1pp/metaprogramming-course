Тесты
======

## Сборка и запуск

Это наиболее простой алгоритм заставить всё работать. Если вы хотите как-то поменять рабочее окружение, всё на вашей ответственности.

* Склонируйте локально этот репозиторий и ваш "форк" [репозитория шаблонов решений](https://github.com/Mrkol/metaprogramming-course-solutions-template) в одну папку. В итоге рядом должны лежать две папки с соответствующими репозиториями, `metaprogramming-course` и `metaprogramming-course-solutions`. Не меняйте их имена, иначе конфиги полетят
* Установите vscode и docker
* Откройте vscode, установите расширения "Docker" и "Dev Containers"
* Внутри vscode выполните команду (Ctrl-Shift-P) "Open Workspace In Container" и выберете файл `solutions.code-workspace` из корня репозитория курса. На всплывшем варнинге нажмите "continue"
* vscode немножко подумает и откроет вам воркспейс с двумя репозиториями. Код пишем в одном, запускаем в другом. Все расширения установятся автоматом, должно работать "из коробки"
* Выберете тулкит clang на нижней панеле. В некоторых задачх его возможно придётся менять на gcc, но будем надеяться, что свежий шланг не такой вялый как год назад
* **ВНИМАНИЕ**: на нижней панеле слева есть значёк папочки, рядом с которым написано `metaprogramming-course` или `solutions`. Убедитесь, что на нём выбрано первое, иначе vscode будет пытаться билдить не ту папку. Флажка конфигурации для автоматизации этого выбора к сожалению пока не завезли.

Перед тем, как писать код, ознакомьтесь с [правилами сдачи](https://github.com/Mrkol/metaprogramming-course/blob/master/tasks/README.md).

## Конфигурация cmake

Все флаги для cmake при разработке выставляются в файле `.vscode/settings.json`.

* Cmake по-отдельности собирает каждую задачу. Чтобы поменять номер решаемой вами задачи, поменяйте `N` во флаге `-DTASK=N`.
* К некоторым задачам могут быть тесты, которые не должны компилироваться. Чтобы попытаться их "собрать", добавьте опцию `-DNOCOMPILE=ON` и компилируйте таргеты в названии которых есть слово `nocompile`.
* Путь к репозиторию с решениями выставляется флагом `-DREPOSITORY_PATH=...`, но если вы используете контейнер и vscode, то всё должно работать само.
